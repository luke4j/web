/*
 *   jquery.arScroll.js
 *  ===========================
 *   v1.3.3 [2013.05.10]
 *  ===========================
 *   power by Aaron 
 *   Aaron.xiexie@gmail.com
 */
;(function($){$.fn.arScroll=function(options){var defaults={varea:"dd",areaItem:2,row:1,scrollItem:1,speed:3000,vertical:false,auto:false,showPage:false,pnBtn:true};var opts=$.extend(defaults,options);return this.each(function(){if(!this)return false;var parent=$(this);var area=$(opts.varea,parent);if(!area[0])return false;var content=$("ul",area);if(!content[0])return false;var contentObj=$("li",content);if(!contentObj[0])return false;var areaSizeKey,n_areaSizeKey,outerSizeKey,n_outerSizeKey,direction;if(opts.vertical){areaSizeKey="height";n_areaSizeKey="width";outerSizeKey="outerHeight";n_outerSizeKey="outerWidth";direction="top";parent.addClass("vscroll");}else{areaSizeKey="width";n_areaSizeKey="height";outerSizeKey="outerWidth";n_outerSizeKey="outerHeight";direction="left"};var nDirection=false;var optData={};var index=0;var page=1;var len=contentObj.length;var page_count=Math.ceil(len/opts.areaItem/opts.row);var v_areaSize=contentObj[outerSizeKey]()*opts.areaItem;var img=new Image();img.src=contentObj.find("img").eq(0).attr("src");img.onload=function(){area[n_areaSizeKey](contentObj[n_outerSizeKey]()*opts.row)};parent.css("position","relative");content[areaSizeKey](v_areaSize*page_count).css("position","relative");area[areaSizeKey](v_areaSize).css({overflow:"hidden",position:"relative"});if(page_count>1&&opts.pnBtn){if(!parent.find(".next")[0])parent.append('<span class="next"/>');if(!parent.find(".prev")[0])parent.append('<span class="prev"/>');parent.children(".next").click(function(){if(page>=page_count){page=1;index=0}else{page++;index=(page-1)*opts.areaItem};showImg(index)});parent.children(".prev").click(function(){if(page<=1){page=page_count;index=(page_count-1)*opts.areaItem}else{page--;index=(page-1)*opts.areaItem};showImg(index)})};if(page_count>1&&opts.showPage){var pageNo=$(opts.varea=="dd"?"dt":".pageno",parent);var pageNum="";for(var i=1;i<=page_count;i++){pageNum+="<span>"+i+"</span>"};if(pageNo[0]&&$.trim(pageNo.html())==""){pageNo.html(pageNum)}else{parent.prepend(opts.varea=='dd'?'<dt/>':'<div class="pageno"/>');pageNo=$(opts.varea=="dd"?"dt":".pageno",parent);pageNo.html(pageNum)};$("span:first",pageNo).addClass("current");pageNo.children().click(function(){page=$(this).prevAll().length+1;index=(page-1)*opts.areaItem;showImg(index);if(page>=page_count){nDirection=true}else if(page<=1&&index<=0){nDirection=false}})};function showImg(idx){if(!idx&&idx!=0)return false;index=idx;optData[direction]=-contentObj[outerSizeKey]()*index;if(!content.is(":animated"))content.animate(optData,400);if(opts.showPage)pageNo.children().eq(page-1).addClass("current").siblings().removeClass("current")};function autoScroll(){contentObj.eq(index).addClass("current").siblings().removeClass("current");showImg(index);if(nDirection){index=index>opts.scrollItem?index-opts.scrollItem:0}else{index=(len-index-1)>=opts.scrollItem?index+opts.scrollItem:len+1};page=Math.ceil((index+1)/opts.areaItem);if(page>=page_count){nDirection=true}else if(page<=1&&index<=0){nDirection=false}};if(page_count>1&&opts.auto){var MyTime;parent.hover(function(){if(MyTime){clearInterval(MyTime)}},function(){MyTime=setInterval(autoScroll,opts.speed)}).trigger("mouseleave")};});}})(jQuery);